{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';// To handle redirects\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserDashboard=()=>{const[username,setUsername]=useState('');const[loading,setLoading]=useState(true);const history=useHistory();// Fetch the logged-in user details\nuseEffect(()=>{const fetchUser=async()=>{try{const response=await fetch('/api/user',{method:'GET',credentials:'include'// Make sure to include cookies for session validation\n});if(response.ok){const data=await response.json();setUsername(data.user.username);// Assuming the backend returns the user object with username\n}else{// If the response is not okay, redirect to the register page\nhistory.push('/register');}}catch(error){console.error('Error fetching user data:',error);history.push('/register');// If there's an error, redirect to the register page\n}finally{setLoading(false);// Hide the loading spinner once the API call is done\n}};fetchUser();},[history]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Display a loading indicator while fetching user data\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",username,\"!\"]})]});};export default UserDashboard;","map":{"version":3,"names":["React","useState","useEffect","useHistory","jsx","_jsx","jsxs","_jsxs","UserDashboard","username","setUsername","loading","setLoading","history","fetchUser","response","fetch","method","credentials","ok","data","json","user","push","error","console","children"],"sources":["/home/ubuntu/hackmo/hackmo/src/components/UserDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'; // To handle redirects\n\nconst UserDashboard = () => {\n  const [username, setUsername] = useState('');\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n\n  // Fetch the logged-in user details\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await fetch('/api/user', {\n          method: 'GET',\n          credentials: 'include', // Make sure to include cookies for session validation\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setUsername(data.user.username); // Assuming the backend returns the user object with username\n        } else {\n          // If the response is not okay, redirect to the register page\n          history.push('/register');\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        history.push('/register'); // If there's an error, redirect to the register page\n      } finally {\n        setLoading(false); // Hide the loading spinner once the API call is done\n      }\n    };\n\n    fetchUser();\n  }, [history]);\n\n  if (loading) {\n    return <div>Loading...</div>; // Display a loading indicator while fetching user data\n  }\n\n  return (\n    <div>\n      <h1>User Dashboard</h1>\n      <p>Welcome, {username}!</p>\n    </div>\n  );\n};\n\nexport default UserDashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,kBAAkB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAY,OAAO,CAAGV,UAAU,CAAC,CAAC,CAE5B;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,WAAW,CAAE,CACxCC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,SAAW;AAC1B,CAAC,CAAC,CAEF,GAAIH,QAAQ,CAACI,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClCX,WAAW,CAACU,IAAI,CAACE,IAAI,CAACb,QAAQ,CAAC,CAAE;AACnC,CAAC,IAAM,CACL;AACAI,OAAO,CAACU,IAAI,CAAC,WAAW,CAAC,CAC3B,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjDX,OAAO,CAACU,IAAI,CAAC,WAAW,CAAC,CAAE;AAC7B,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CAAE;AACrB,CACF,CAAC,CAEDE,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACD,OAAO,CAAC,CAAC,CAEb,GAAIF,OAAO,CAAE,CACX,mBAAON,IAAA,QAAAqB,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAChC,CAEA,mBACEnB,KAAA,QAAAmB,QAAA,eACErB,IAAA,OAAAqB,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBnB,KAAA,MAAAmB,QAAA,EAAG,WAAS,CAACjB,QAAQ,CAAC,GAAC,EAAG,CAAC,EACxB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}